# 1장_JPA 소개

## JPA란 무엇인가?
> **JPA는 자바 ORM 기술에 대한 API 표준 명세**

- 자바 진영의 ORM 기술 표준이다.
  - ORM : 이름 그대로 객체와 관계형 데이터베이스를 매팡한다는 뜻
  - ORM 프레임워크 : 객체와 테이블을 매핑해서 패러다임의 불일치 문제를 개발자 대신 해결해준다.
- JPA라는 표준 덕분에 특정 구현 기술에 대한 의존도를 줄일 수 있고 다른 구현 기술로 손쉽게 이동할 수 있는 장점이 있다.

### 왜 JPA를 사용하는가?
1. 생산성
    - 반복적인 코드와 CRUD용 SQL을 개발자가 직접 작성하지 않아도 된다. 데이터베이스 설계 중심의 패러다임을 객체 설계 중심으로 역전시킬 수 있다.
2. 유지보수
    - JPA를 사용하면 JPA가 대신 처리해주므로 필드를 추가하거나 삭제해도 수정해야할 코드가 줄어준다.
    - JPA가 패러다임의 불일치 문제를 해결해주므로 객체지향 언어가 가진 장점들을 활용해 유연하고 유지보수하기 좋은 도메인 모델을 편리하게 설계할 수 있다.
    #### 패러다임 불일치
    - 객체지향 프로그래밍의 경우 추상화, 캡슐화, 정보은닉, 상속, 다형성 등 시스템의 복잡성을 제어할 수 있는 방법이 존재하기 때문에 많은 애플리케이션이 객체지향 언어로 개발한다.
    - 비즈니스 요구사항을 정의한 도메인 모델을 객체로 모델링하면 객체가 지니는 장점을 활용할 수 있다. 하지만 문제는 어떻게 객체를 저장해야할지다. 예를 들어 유저에대한 정보를 담는 인스턴스를 생성했다면 메모리가 아닌 영구적인 저장소에 저장해야한다. **단순히 객체의 속성을 모두 꺼내와 데이터베이스에 저장할 수 도 있지만, 만약 객체가 상속을 받거나 다른 객체를 참조하게 된다면 쉽지않을 것이다.** 자바의 경우 직렬화를 제공해 객체자체를 파일로 저장할 수 있도록 해준다. 파일은 역직렬화를 통해 다시 객체로 만들수 있다. 파일로 생성된 데이터를 검색한다는 자체가 어렵다. 현실적으로 데이터베이스에 저장해야한다.
    - 데이터베이스는 데이터 중심으로 구조화되어있다. 객체의 상속, 다형성 같은 개념이없다. 그러다보니 객체와 데이터베이스가 지향하는 점이다르다. 이것을 **객체와 데이터베이스의 패러다임 불일치**라 한다. 자바는 객체지향으로 이루어져 있고 데이터베이스는 데이터중심으로 구조화되어있기 때문에 패러다임 불일치 문제를 개발자가 해결해야 한다. 이 과정에서 시간과 코드를 소비하는 문제가 있다.

    ![상속](../img/%EA%B0%9D%EC%B2%B4.png) <br/>
    - 그림처럼 객체는 상속이라는 기능(method)를 가지고 있지만 테이블은 상속이라는 기능이 없다.

    ![테이블 모델](../img/관계형%20데이터베이스.png)

    #### JPA와 상속
    1. 저장 기능 - persist()
        ```java
        jpa.persist(member);
        ```
    2. 조회 기능 - find()
        ```java
        String ablumId = "id100";
        Album album = jpa.find(Album.class, albumId); // 조회
        ```
    3. 수정 기능 - 존재하지 않는다.
        - JPA는 별도의 수정 method를 제공하지 않는다. 대신 객체를 조회해서 값을 변경하면 트랜잭션을 커밋할때 데이터베이스에 적절한 업데이트 SQL이 전달된다.
    
    4. 삭제 기능 - delete()
        ```java
        jpa.delete(member)
        ```